#
# Create a docroot user that can log in via ssh
#
# The ~docroot/.ssh/authorized_key file will be generated/updated by
# ubos-manifest.json
#

post_install() {
    # create user docroot if it does not exist, with bash
    getent passwd docroot &>/dev/null || useradd -s /bin/bash -c 'rsync over ssh access for upload to docroot' -m docroot >/dev/null

    # lock the account by setting an impossible password
    passwd -l docroot &>/dev/null
    true
}

post_upgrade() {
    post_install
}

post_remove() {
    # for security reasons, leave user and their data there
    true
}
